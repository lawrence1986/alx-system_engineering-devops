<center> <h1>0x09. Web infrastructure design</h1> </center>
-----------------------------------------------------------
For this project, we expect you to look at these concepts:

* DNS
* Monitoring
* Web Server
* Network basics
* Load balancer
* Server

**This is a TEAM Project done by Lawrence Maduabuchi & Ngui Abdullahi during **Full Stack Software Engineering studies** at **ALX School**. It aims to learn about building your Web Infrastructure**.


<center> <h1>0. Simple web stack</h1> </center>

-------------------------------------------------------------
**Design of Single-Server Web Infrastructure for foobar.com:**

1. **Server (8.8.8.8):**
   - Purpose: Host all components of the web infrastructure.
   - Components: Operating system (e.g., Linux), necessary software.

2. **Web Server (Nginx):**
   - Purpose: Handle incoming HTTP requests and serve static content.
   - Components: Nginx software, configuration files.

 **Application Server:**
   - Purpose: Process dynamic content, handle business logic.
   - Components: Application runtime (e.g., PHP, Python), application code.

4. **Application Files (Your Code Base):**
   - Purpose: Contains the website's source code, templates, and assets.
   - Components: HTML, CSS, JavaScript, server-side scripts.

5. **Database (MySQL):**
   - Purpose: Store and manage website data.
   - Components: MySQL database software, data files.

6. **Domain Name foobar.com with www Record:**
   - Purpose: Provides a human-readable name for the website.
   - Configuration: A DNS "A" record for foobar.com pointing to the server's IP (8.8.8.8).

**Specifics of the Infrastructure:**

- **Server:** The server is a physical or virtual machine that hosts all the necessary software components to run the website. It responds to incoming requests and serves content accordingly.

- **Domain Name:** The domain name (foobar.com) is a user-friendly identifier for the website's IP address. It's easier for users to remember and access the website using a domain name rather than an IP address.

- **DNS Record for www:** The DNS record "www" in www.foobar.com is a "CNAME" (Canonical Name) record that points to the domain's root ("A") record, which maps to the server's IP address (8.8.8.8).

- **Web Server (Nginx):** Nginx serves as the web server, receiving incoming HTTP requests from users and serving static content like images, CSS, and JavaScript files. It can also be configured to handle certain application-related tasks.

- **Application Server:** The application server processes dynamic content generated by the application code. It executes server-side scripts and handles logic that can't be handled by the web server alone.

- **Database (MySQL):** MySQL is used to store and manage the website's data. It can handle read and write operations efficiently, allowing the website to interact with user data and content.

- **Server-User Communication:** The server communicates with the user's computer over the internet using the HTTP protocol. When a user enters www.foobar.com in their browser, their computer sends an HTTP request to the server at IP 8.8.8.8, which responds with the website's content.

**Issues with the Infrastructure:**

1. **Single Point of Failure (SPOF):** The entire website relies on a single server. If this server goes down due to hardware failure or other issues, the website becomes inaccessible.

2. **Downtime during Maintenance:** When performing maintenance or deploying new code, the web server needs to be restarted. This could result in downtime for users trying to access the website during that time.

3. **Scalability Issues:** The infrastructure cannot handle a sudden increase in incoming traffic. The single server might become overwhelmed, leading to slow performance or downtime during traffic spikes.

* To address these issues, consider implementing load balancing, redundant servers, and possibly cloud-based solutions to improve availability, scalability, and reliability.
------------------------------------------------------------------------------------------

<center> <h2>1. Distributed web infrastructure</h2> </center>

**Design of Three-Server Web Infrastructure for foobar.com:**

1. **Load Balancer (HAproxy):**
   - Purpose: Distribute incoming traffic across multiple servers to improve availability and performance.
   - Distribution Algorithm: Round-robin, evenly distributing requests.
   - Active-Active Setup: Both servers actively handle traffic.

2. **Server 1 and Server 2:**
   - Purpose: Host components of the web infrastructure, providing redundancy.
   - Components: Operating system, necessary software.

3. **Web Server (Nginx):**
   - Purpose: Handle incoming requests, serve static content, and perform initial request processing.
   - Components: Nginx software, configuration files.

4. **Application Server:**
   - Purpose: Process dynamic content, execute business logic, and generate responses.
   - Components: Application runtime (e.g., PHP, Python), application code.

5. **Set of Application Files (Your Code Base):**
   - Purpose: Contains the website's source code, templates, and assets.
   - Components: HTML, CSS, JavaScript, server-side scripts.

6. **Database (MySQL):**
   - Purpose: Store and manage website data.
   - Components: MySQL database software, data files.

**Specifics of the Infrastructure:**

- **Load Balancer:** The load balancer distributes incoming requests across two servers using a round-robin algorithm. This improves performance, prevents overloading a single server, and enhances fault tolerance.

- **Distribution Algorithm:** Round-robin distributes requests in a cyclic manner to each server sequentially.

- **Active-Active Setup:** Both servers actively handle incoming traffic, distributing the load and providing redundancy. In an active-active setup, both servers are operational simultaneously.

- **Database Primary-Replica (Master-Slave) Cluster:**
   - Primary Node: Handles write operations, maintaining the main dataset.
   - Replica Node: Handles read operations, replicates data from the primary node.

**Issues with the Infrastructure:**

1. **Single Points of Failure (SPOF):** While the load balancer improves redundancy, each server and the load balancer itself remain single points of failure. If one of them fails, the entire system could become unavailable.

2. **Security Issues:** Lack of firewalls exposes servers to potential attacks. Without HTTPS, data transmitted between users and servers is unencrypted, risking data privacy and integrity.

3. **No Monitoring:** Without monitoring, you lack visibility into the infrastructure's health, performance, and security. This could lead to undetected issues and downtime.

To address these issues:
- Implement firewalls to protect servers.
- Configure HTTPS to secure data transmission.
- Set up monitoring tools to collect data and detect issues proactively.
- Consider redundancy for load balancers and servers to mitigate SPOF.
- Add additional security layers like Intrusion Detection Systems (IDS) and Web Application Firewalls (WAF).
- Consider implementing a Content Delivery Network (CDN) for improved performance and security.
------------------------------------------------------------------------------------------------------------------------------------------

<center> <h2>2. Secured and monitored web infrastructure</h2> </center>

**Design of Three-Server Web Infrastructure for www.foobar.com:**

1. **Load Balancer (LB):**
   - Purpose: Distribute incoming traffic across multiple servers to ensure high availability and load distribution.
   - Components: Load balancing software/hardware.
   
2. **Web Servers (WS1, WS2, WS3):**
   - Purpose: Host the website content and handle user requests.
   - Components: Web server software (e.g., Nginx, Apache), application code.

3. **Application Servers (AS1, AS2, AS3):**
   - Purpose: Process dynamic content, business logic, and interact with the database.
   - Components: Application runtime environment, necessary libraries.

4. **Database Servers (DB1, DB2, DB3):**
   - Purpose: Store and manage website data.
   - Components: MySQL or other database software.

5. **Firewalls (FW1, FW2, FW3):**
   - Purpose: Enforce security policies by filtering incoming and outgoing traffic.
   - Function: Blocks unauthorized access, prevents malicious attacks.

6. **SSL Certificate:**
   - Purpose: Secure communication between users and the web servers by encrypting data.
   - Function: Ensures data privacy and integrity.

7. **Monitoring Clients (MC1, MC2, MC3):**
   - Purpose: Monitor the health, performance, and security of the infrastructure.
   - Components: Monitoring agent software.

**Specifics of the Infrastructure:**

- **Firewalls:** Firewalls are added to protect the infrastructure by controlling and filtering traffic. They help prevent unauthorized access and protect against malicious attacks.

- **SSL Certificate:** Serving traffic over HTTPS is essential to encrypt data transmitted between users and servers. This prevents eavesdropping and ensures data integrity during transmission.

- **Monitoring:** Monitoring is used to track the infrastructure's performance, detect issues, and ensure uptime. Monitoring tools collect data about server health, response times, resource utilization, etc.

- **Monitoring Data Collection:** Monitoring clients (data collectors) gather information from various components (servers, load balancer, database), send it to monitoring services (like Sumo Logic), and provide insights into the system's behavior.

- **Monitoring Web Server QPS (Queries Per Second):** To monitor web server QPS, set up monitoring agents to track the number of incoming queries to the web servers. This data can be collected and analyzed to ensure optimal performance.

**Issues with the Infrastructure:**

1. **Terminating SSL at Load Balancer Level:**
   - Issue: While terminating SSL at the load balancer can offload processing from web servers, it requires transmitting decrypted data internally. This might expose sensitive information if proper security measures are not in place.

2. **Single MySQL Server for Writes:**
   - Issue: Having only one MySQL server that can accept writes creates a single point of failure. If this server goes down, write operations will fail, impacting the availability and consistency of the application.

3. **Uniform Server Components:**
   - Issue: Using identical components for all servers (database, web, application) might lead to resource bottlenecks. Different components often have varying resource requirements. For example, a database server might require more CPU and memory than a web server.

By addressing these issues and optimizing the infrastructure, you can build a more secure, scalable, and reliable web hosting environment for foobar.

--------------------------------------------------------------------------------------------------------------------------
3. Scale up
Requirements:

* 1 server
* 1 load-balancer (HAproxy) configured as cluster with the other one
* Split components (web server, application server, database) with their own server
* You must be able to explain some specifics about this infrastructure:
-------------------------------------------------------------------------------------------------------------------------

1. **Server**: This is the fundamental unit of your infrastructure. It's a physical or virtual machine that provides the resources necessary to run your applications and services. Each component (web server, application server, database) will be hosted on its own server for isolation and resource allocation.

2. **Load Balancer (HAproxy)**: A load balancer distributes incoming network traffic across multiple servers to ensure high availability (HA) and improve performance. By configuring HAproxy in a cluster, you create redundancy. If one load balancer fails, the other can take over seamlessly, preventing service downtime.

   **Why it's added**: Load balancers help distribute incoming traffic evenly across multiple servers, preventing overloading of any single server and ensuring that the system can handle increased user requests. Clustering the load balancers adds redundancy, further improving the system's availability.

3. **Web Server**: The web server's primary function is to serve static content, like HTML, CSS, and JavaScript files, to clients (web browsers). It handles incoming HTTP requests and returns the appropriate web pages to users.

   **Why it's added**: Web servers provide the initial point of contact for user requests. By dedicating a separate server to this role, you ensure that the web server's resources are optimized for handling HTTP requests efficiently.

4. **Application Server**: Application servers execute the business logic of your application. They process dynamic requests, interact with databases, and generate dynamic content to be sent to the web server for presentation to the user.

   **Why it's added**: Separating the application server from the web server allows for better resource management. Application servers can handle complex processing tasks without impacting the web server's performance. Additionally, this separation makes it easier to scale your application by adding more application servers as needed.

5. **Database Server**: The database server stores and manages the application's data. It responds to queries from the application server and ensures data integrity, consistency, and persistence.

   **Why it's added**: Databases require specialized resources and can become performance bottlenecks if not managed properly. A dedicated database server ensures that data storage and retrieval are optimized, allowing the application and web servers to focus on their respective tasks.

By implementing this infrastructure with separate servers for each component and load balancers for high availability, you achieve several benefits:

- **Scalability**: Each component can be scaled independently. For example, if your application server needs more processing power, you can add more application servers without affecting other components.

- **Isolation**: Isolating components on separate servers enhances security and resource allocation. A performance issue in one component won't directly affect the others.

- **Redundancy**: Clustering the load balancers and isolating each component improves system redundancy, reducing the risk of service disruption due to hardware failures.

- **Performance**: Optimizing each server for its specific role ensures that resources are used efficiently, leading to better overall performance.

- **Maintenance**: Isolation makes maintenance and updates easier. You can take down one component for maintenance without affecting the others.

* In summary, this infrastructure design addresses the key requirements of high availability, scalability, isolation, and performance optimization for each component in the system.
